<!DOCTYPE html>
<html>
<head>
    <title>Fast & Slow Pointers Pattern</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #3498db;
            margin-top: 20px;
        }
        h3 {
            color: #2980b9;
        }
        .code-block {
            background-color: #1e1e1e;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            margin: 15px 0;
        }
        .comment {
            color: #75715e;
        }
        .example {
            background-color: #f9f9f9;
            border-left: 4px solid #3498db;
            padding: 10px 20px;
            margin: 20px 0;
        }
        .visualization {
            margin: 20px 0;
            overflow-x: auto;
        }
        .step-block {
            background-color: #f8f9fa;
            border-left: 4px solid #28a745;
            padding: 10px 20px;
            margin: 20px 0;
        }
        .highlight {
            background-color: #ffffcc;
            padding: 2px 4px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .slow {
            color: #e74c3c;
            font-weight: bold;
        }
        .fast {
            color: #3498db;
            font-weight: bold;
        }
        img {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

<h1>Fast & Slow Pointers Pattern</h1>

<h2>Introduction</h2>
<p>The Fast & Slow Pointers pattern (also known as the "Hare and Tortoise" algorithm) is a technique that uses two pointers moving through a sequence at different speeds. This pattern is particularly useful for:</p>
<ul>
    <li>Detecting cycles in a linked list or sequence</li>
    <li>Finding the middle element of a linked list</li>
    <li>Finding if a linked list is a palindrome</li>
    <li>Determining the length of a cycle</li>
</ul>

<h2>How It Works</h2>
<p>The core idea is to have two pointers moving through the sequence at different speeds:</p>
<ul>
    <li>The <span class="slow">slow pointer</span> moves one step at a time</li>
    <li>The <span class="fast">fast pointer</span> moves two steps at a time</li>
</ul>

<p>If there is a cycle in the sequence, the fast pointer will eventually catch up to the slow pointer, confirming the presence of a cycle. If there is no cycle, the fast pointer will reach the end of the sequence.</p>

<div class="example">
    <h3>Key Properties:</h3>
    <ul>
        <li>If there is a cycle, the pointers will definitely meet</li>
        <li>If there is no cycle, the fast pointer will reach the end</li>
        <li>Time complexity is typically O(N)</li>
        <li>Space complexity is typically O(1) since we only use two pointers</li>
    </ul>
</div>

<h2>Problem: Happy Number</h2>

<p>LeetCode: 202. Happy Number<br>
<a href="https://leetcode.com/problems/happy-number/" target="_blank">https://leetcode.com/problems/happy-number/</a></p>

<h3>Problem Statement</h3>
<p>Write an algorithm to determine if a number n is happy.</p>

<p>A <strong>happy number</strong> is defined by the following process:</p>
<ol>
    <li>Starting with any positive integer, replace the number by the sum of the squares of its digits.</li>
    <li>Repeat the process until the number equals 1 (where it will stay), or it loops endlessly in a cycle which does not include 1.</li>
</ol>

<p>Those numbers for which this process ends in 1 are happy.</p>
<p>Return true if n is a happy number, and false if not.</p>

<div class="example">
    <h3>Example 1:</h3>
    <p><strong>Input:</strong> n = 19<br>
    <strong>Output:</strong> true</p>
    <p><strong>Explanation:</strong></p>
    <ul>
        <li>1<sup>2</sup> + 9<sup>2</sup> = 1 + 81 = 82</li>
        <li>8<sup>2</sup> + 2<sup>2</sup> = 64 + 4 = 68</li>
        <li>6<sup>2</sup> + 8<sup>2</sup> = 36 + 64 = 100</li>
        <li>1<sup>2</sup> + 0<sup>2</sup> + 0<sup>2</sup> = 1 + 0 + 0 = 1</li>
    </ul>
    <p>Since we reached 1, 19 is a happy number.</p>
</div>

<div class="example">
    <h3>Example 2:</h3>
    <p><strong>Input:</strong> n = 2<br>
    <strong>Output:</strong> false</p>
    <p><strong>Explanation:</strong> The sequence starting from 2 creates a cycle that doesn't include 1.</p>
</div>

<h3>Why This Problem Fits the Fast & Slow Pointers Pattern</h3>
<p>This problem can be visualized as a linked list where each node points to the result of calculating the sum of squared digits. There are two possible outcomes:</p>
<ul>
    <li>If the number is happy, the sequence will eventually reach 1 and stay there</li>
    <li>If the number is not happy, the sequence will enter a cycle that doesn't include 1</li>
</ul>

<p>To detect if there's a cycle, we can use the Fast & Slow pointers technique.</p>

<h3>Visualizing the Problem</h3>

<div class="visualization">
    <h4>Example of a Happy Number (n=19):</h4>
    <table>
        <tr>
            <th>Step</th>
            <th>Number</th>
            <th>Sum of Squared Digits</th>
            <th>Slow Pointer</th>
            <th>Fast Pointer</th>
        </tr>
        <tr>
            <td>Initial</td>
            <td>19</td>
            <td>-</td>
            <td class="slow">19</td>
            <td class="fast">19</td>
        </tr>
        <tr>
            <td>1</td>
            <td>19 → 82</td>
            <td>1<sup>2</sup> + 9<sup>2</sup> = 82</td>
            <td class="slow">82</td>
            <td class="fast">68</td>
        </tr>
        <tr>
            <td>2</td>
            <td>82 → 68</td>
            <td>8<sup>2</sup> + 2<sup>2</sup> = 68</td>
            <td class="slow">68</td>
            <td class="fast">1</td>
        </tr>
        <tr>
            <td>3</td>
            <td>68 → 100</td>
            <td>6<sup>2</sup> + 8<sup>2</sup> = 100</td>
            <td class="slow">100</td>
            <td class="fast">1</td>
        </tr>
        <tr>
            <td>4</td>
            <td>100 → 1</td>
            <td>1<sup>2</sup> + 0<sup>2</sup> + 0<sup>2</sup> = 1</td>
            <td class="slow">1</td>
            <td class="fast">1</td>
        </tr>
    </table>
    <p>Since the slow pointer has reached 1, 19 is a happy number.</p>
</div>

<div class="visualization">
    <h4>Example of a Non-Happy Number (n=2):</h4>
    <table>
        <tr>
            <th>Step</th>
            <th>Number</th>
            <th>Sum of Squared Digits</th>
            <th>Slow Pointer</th>
            <th>Fast Pointer</th>
        </tr>
        <tr>
            <td>Initial</td>
            <td>2</td>
            <td>-</td>
            <td class="slow">2</td>
            <td class="fast">2</td>
        </tr>
        <tr>
            <td>1</td>
            <td>2 → 4</td>
            <td>2<sup>2</sup> = 4</td>
            <td class="slow">4</td>
            <td class="fast">16</td>
        </tr>
        <tr>
            <td>2</td>
            <td>4 → 16</td>
            <td>4<sup>2</sup> = 16</td>
            <td class="slow">16</td>
            <td class="fast">37</td>
        </tr>
        <tr>
            <td>3</td>
            <td>16 → 37</td>
            <td>1<sup>2</sup> + 6<sup>2</sup> = 37</td>
            <td class="slow">37</td>
            <td class="fast">16</td>
        </tr>
        <tr>
            <td>4</td>
            <td>37 → 58</td>
            <td>3<sup>2</sup> + 7<sup>2</sup> = 58</td>
            <td class="slow">58</td>
            <td class="fast">58</td>
        </tr>
    </table>
    <p>Since the slow and fast pointers have met at 58, we've detected a cycle, meaning 2 is not a happy number.</p>
</div>

<h3>Solution Approach</h3>

<div class="step-block">
    <h4>Algorithm Steps:</h4>
    <ol>
        <li>Initialize a slow pointer and a fast pointer, both starting at n</li>
        <li>Move the slow pointer one step at a time (calculate sum of squared digits once)</li>
        <li>Move the fast pointer two steps at a time (calculate sum of squared digits twice)</li>
        <li>If the slow pointer becomes 1, return true</li>
        <li>If the slow and fast pointers meet, there's a cycle, so return false</li>
    </ol>
</div>

<h3>Python Implementation</h3>

<pre class="code-block">
def isHappy(n):
    slow = n
    fast = n
    while True:
        slow = getNewNumber(slow)  # Move slow pointer one step
        fast = getNewNumber(getNewNumber(fast))  # Move fast pointer two steps
        if slow == fast or slow == 1:  # Cycle detected or we found 1
            break
    return slow == 1  # If slow is 1, it's a happy number

def getNewNumber(num):
    sum = 0
    while num:
        num, r = divmod(num, 10)  # Get last digit
        sum += r * r  # Add square of digit
    return sum
</pre>

<h3>Time and Space Complexity</h3>

<p><strong>Time Complexity:</strong> O(log n) - The number of digits in a number n is approximately log₁₀(n), and the time to calculate the sum of squared digits is proportional to the number of digits.</p>

<p><strong>Space Complexity:</strong> O(1) - We only use two pointers regardless of the input size.</p>

<h2>Other Applications of Fast & Slow Pointers</h2>

<h3>1. Detecting a Cycle in a Linked List</h3>
<p>Use fast and slow pointers to determine if a linked list has a cycle. If the pointers meet, a cycle exists.</p>

<h3>2. Finding the Start of a Cycle in a Linked List</h3>
<p>After detecting a cycle, reset one pointer to the head and move both pointers at the same speed. The meeting point will be the start of the cycle.</p>

<h3>3. Finding the Middle of a Linked List</h3>
<p>When the fast pointer reaches the end, the slow pointer will be at the middle.</p>

<h3>4. Determining if a Linked List is a Palindrome</h3>
<p>Find the middle using fast and slow pointers, reverse the second half, and compare with the first half.</p>

<h2>Summary</h2>

<p>The Fast & Slow Pointers pattern is an elegant solution for problems involving cycles or finding specific positions in a sequence. It provides O(1) space complexity which is significantly better than using a hash table to track visited elements.</p>

<p>The key insight is that if there's a cycle, the fast pointer will eventually catch up to the slow pointer, allowing us to detect the presence of a cycle without using additional space.</p>

<p>This pattern demonstrates how varying the speed of traversal can help solve complex problems efficiently.</p>

</body>
</html>
